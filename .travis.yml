sudo: true

language: go

# Skip install step. Control by ourself
install: true

matrix:
  fast_finish: true
  include:
    - go: "1.10.x"
      before_script:
        - wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key|sudo apt-key add -
        - apt-get install libllvm-6.0-ocaml-dev libllvm6.0 llvm-6.0 llvm-6.0-dev llvm-6.0-doc llvm-6.0-examples llvm-6.0-runtime
        - apt-get install clang-6.0 clang-tools-6.0 clang-6.0-doc libclang-common-6.0-dev libclang-6.0-dev libclang1-6.0 clang-format-6.0 python-clang-6.0
        - apt-get install libfuzzer-6.0-dev
        - apt-get install lldb-6.0
        - apt-get install lld-6.0
        - go get -t -v ./...
      script:
        - go test -coverprofile=coverage.txt -v ./...

